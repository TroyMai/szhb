# 数智湖北 - 功能实现说明

> 本文档面向项目组成员，介绍当前已实现的功能页面和基本操作流程

---

## 一、已实现的页面

### 1. 登录页面 (`pages/login.html`)

**功能**：用户登录系统

**操作**：
- 输入用户名和密码
- 点击"登录"按钮
- 系统会根据用户角色跳转到对应页面

**测试账号**：
- 管理员：`admin` / `123456`
- 普通用户：`normal_user` / `123456`
- 决策用户：`decision_user` / `123456`

---

### 2. 首页 (`pages/home.html`)

**功能**：数据概览和快速入口

**主要功能**：
- 显示数据统计卡片（总数据数、类别数、来源数）
- 显示数据趋势图表（最近时间的数据变化）
- 显示数据来源分布（饼图）
- 提供快速导航到各个功能模块

**操作**：
- 查看数据统计信息
- 点击卡片或按钮跳转到相应功能页面

---

### 3. 数据查询页面 (`pages/query.html`)

**功能**：多条件组合查询数据

**主要功能**：
- **筛选条件**：
  - 数据名称（支持模糊搜索）
  - 类别（下拉选择）
  - 来源（下拉选择）
  - 记录数范围
  - 创建时间范围
- **排序功能**：按记录数、创建时间升序/降序
- **分页显示**：每页显示 20 条数据
- **数据操作**：
  - 查看详情（跳转到数据详情页）
  - 收藏/取消收藏数据

**操作流程**：
1. 选择筛选条件（可多选）
2. 点击"查询"按钮
3. 查看查询结果列表
4. 点击"查看详情"查看完整数据
5. 点击收藏图标收藏数据

---

### 4. 数据详情页面 (`pages/data-detail.html`)

**功能**：查看数据的详细信息和可视化

**主要功能**：
- **数据基本信息**：
  - 数据名称、类别、来源
  - 记录数、创建时间
- **数据记录列表**：
  - 分页显示所有数据记录
  - 显示时间、地区、指标、数值等信息
- **月度统计**：
  - 显示每个月的统计数据
  - 支持图表可视化
- **地图可视化**：
  - 在湖北省地图上展示各地区数据
  - 不同颜色表示不同数值范围
  - 鼠标悬停显示具体数值

**操作流程**：
1. 从查询页面点击"查看详情"进入
2. 查看数据基本信息
3. 浏览数据记录列表（支持分页）
4. 查看月度统计图表
5. 查看地图可视化（自动加载）
6. 可以收藏该数据

---

### 5. 数据预测页面 (`pages/prediction.html`)

**功能**：基于历史数据预测未来趋势

**主要功能**：
- **数据选择**：
  - 选择数据文件（从本地 JSON 文件）
  - 选择指标（可选，不选则预测所有指标）
  - 选择区域（全省或特定市州）
- **时间设置**：
  - 选择历史数据起始时间
  - 选择历史数据结束时间
  - 选择预测周期数
  - 系统自动检测时间间隔（月度/年度）
- **预测模型**：
  - 移动平均模型
  - 指数平滑模型
  - ARIMA 模型
  - 多项式回归模型
- **结果展示**：
  - 预测结果折线图（历史数据 + 预测数据）
  - 预测统计信息（置信区间、误差分析）
  - 模型评估指标（MAE、RMSE、MAPE）

**操作流程**：
1. 选择数据文件
2. （可选）选择特定指标
3. 选择预测区域
4. 设置历史数据时间范围
5. 设置预测周期数
6. 选择预测模型
7. 点击"开始预测"
8. 查看预测结果图表和统计信息

**注意**：只有**决策用户**和**管理员**可以使用此功能

---

### 6. 决策分析页面 (`pages/analysis.html`)

**功能**：AI 辅助决策分析

**主要功能**：
- **数据选择**：
  - 选择数据文件
  - （可选）选择特定指标进行针对性分析
- **问题输入**：
  - 选择预设问题类型（趋势分析、异常检测、对比分析、决策建议）
  - 或输入自定义问题
- **AI 分析**：
  - 系统会构建详细的数据摘要
  - 调用大模型 API 进行分析
  - 生成分析报告和决策建议
- **结果展示**：
  - 分析报告（详细分析内容）
  - 决策建议（可行性建议）

**操作流程**：
1. 选择数据文件
2. （可选）选择特定指标
3. 选择预设问题或输入自定义问题
4. 点击"开始分析"
5. 等待 AI 分析（可能需要几秒钟）
6. 查看分析报告和决策建议

**注意**：
- 只有**决策用户**和**管理员**可以使用此功能
- 需要配置大模型 API（在 `backend/.env` 中配置 `LLM_API_KEY` 等）
- 如果 API 未配置或调用失败，会使用模拟结果

---

### 7. 个人中心页面 (`pages/profile.html`)

**功能**：个人信息管理和使用记录

**主要功能模块**：

#### 7.1 我的收藏
- 显示所有收藏的数据列表
- 支持分页浏览
- 可以取消收藏
- 点击数据标题可跳转到详情页

#### 7.2 使用记录
- 显示查询和导出历史记录
- 显示操作时间和操作详情

#### 7.3 个人信息
- 查看用户名（不可修改）
- 编辑邮箱、手机号、真实姓名
- 保存修改

#### 7.4 修改密码
- 输入当前密码
- 输入新密码（需包含大小写字母、数字，8-20位）
- 确认新密码
- 提交修改

**操作流程**：
1. 点击导航栏"个人中心"进入
2. 在左侧快捷操作中选择要查看的模块
3. 查看或编辑相应信息

---

### 8. 数据管理页面 (`pages/admin-data.html`) - 仅管理员

**功能**：管理系统中所有数据

**主要功能**：
- **数据列表**：
  - 显示所有数据（支持分页）
  - 显示数据状态（待审核/已审核/已删除）
- **数据筛选**：
  - 按状态筛选
  - 按类别筛选
  - 按来源筛选
- **数据操作**：
  - 创建新数据
  - 编辑数据信息
  - 删除数据
  - 审核数据（待审核 → 已审核）
- **批量操作**：
  - 批量审核
  - 批量删除
- **数据统计**：
  - 类别统计
  - 来源统计
  - 趋势统计

**操作流程**：
1. 管理员登录后，点击导航栏"数据管理"
2. 查看数据列表
3. 使用筛选条件查找数据
4. 点击"创建"添加新数据
5. 点击"编辑"修改数据信息
6. 点击"审核"审核待审核数据
7. 选择多条数据后，使用批量操作

---

### 9. 用户管理页面 (`pages/admin-users.html`) - 仅管理员

**功能**：管理系统用户

**主要功能**：
- **用户列表**：
  - 显示所有用户信息
  - 显示用户角色
- **用户操作**：
  - 创建新用户
  - 编辑用户信息
  - 删除用户
  - 分配用户角色
- **用户统计**：
  - 总用户数
  - 各角色用户数

**操作流程**：
1. 管理员登录后，点击导航栏"用户管理"
2. 查看用户列表
3. 点击"创建用户"添加新用户
4. 点击"编辑"修改用户信息或角色
5. 点击"删除"删除用户

---

### 10. 系统管理页面 (`pages/admin-system.html`) - 仅管理员

**功能**：系统监控和日志查看

**主要功能**：
- **系统状态**：
  - 服务器状态
  - 数据库连接状态
  - 系统运行时间
- **系统日志**：
  - 查看系统操作日志
  - 查看错误日志

**操作流程**：
1. 管理员登录后，点击导航栏"系统管理"
2. 查看系统状态信息
3. 查看系统日志

---

## 二、通用功能

### 1. 导航栏
- **首页**：跳转到首页
- **数据查询**：跳转到数据查询页面
- **数据预测**：跳转到数据预测页面（需权限）
- **决策分析**：跳转到决策分析页面（需权限）
- **个人中心**：跳转到个人中心
- **数据管理/用户管理/系统管理**：管理员专用
- **登出**：退出登录

### 2. 数据收藏
- 在数据查询页面和数据详情页面可以收藏数据
- 收藏的数据会在个人中心显示
- 可以随时取消收藏

### 3. 数据导出
- 在数据详情页面可以导出数据为 CSV 格式
- 导出的文件包含完整的数据记录

---

## 三、权限说明

### 普通用户（normal_user）
- ✅ 数据查询
- ✅ 数据详情查看
- ✅ 数据可视化
- ✅ 数据收藏
- ✅ 个人中心
- ❌ 数据预测
- ❌ 决策分析
- ❌ 管理功能

### 决策用户（decision_user）
- ✅ 普通用户的所有功能
- ✅ 数据预测
- ✅ 决策分析
- ❌ 管理功能

### 管理员（admin）
- ✅ 所有功能
- ✅ 数据管理
- ✅ 用户管理
- ✅ 系统管理

---

## 四、快速开始

### 1. 启动项目
```bash
# 启动后端（在 backend 目录）
cd backend
npm run dev

# 启动前端（在 frontend 目录，新终端）
cd frontend
npm run dev
```

### 2. 访问系统
- 前端地址：`http://localhost:3000`
- 后端地址：`http://localhost:5000`
- 登录页面：`http://localhost:3000/pages/login.html`

### 3. 测试流程
1. 使用测试账号登录
2. 在首页查看数据概览
3. 在数据查询页面搜索数据
4. 查看数据详情和可视化
5. 收藏感兴趣的数据
6. （决策用户）尝试数据预测和决策分析
7. （管理员）尝试数据管理和用户管理

---

## 五、注意事项

1. **数据文件位置**：本地数据文件存放在 `backend/data/entries/` 目录
2. **数据库配置**：需要在 `backend/.env` 中配置数据库连接信息
3. **大模型 API**：决策分析功能需要配置大模型 API（可选，未配置会使用模拟结果）
4. **浏览器兼容性**：建议使用 Chrome、Edge 等现代浏览器
5. **权限控制**：某些功能需要特定角色权限，普通用户无法访问

---

**文档更新日期**：2025年
